---
import BaseLayout from '../../layouts/BaseLayout.astro';
import type { Project } from '../../types/project';
import ProjectsPage from '../../components/projects/ProjectsPage';

const allProjects: Project[] = Object.values(import.meta.glob('../projects/**/index.md', {eager: true}));
const allLanguages: string[] = [...new Set(allProjects.flatMap((project: Project) => project.frontmatter.languages))];
const allAssociations: string[] = [...new Set(allProjects.map((project: Project) => project.frontmatter.association))];
const allProgresses: string[] = [...new Set(allProjects.map((project: Project) => project.frontmatter.progress))];
---
<BaseLayout pageTitle="Projects">
  <ProjectsPage
    client:load
    allProjects={allProjects}
    allLanguages={allLanguages}
    allAssociations={allAssociations}
    allProgresses={allProgresses}
  />
</BaseLayout>
